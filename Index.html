<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–∏—Å—Ç–µ–º–∞ —à—Ç–∞—Ç–∏–≤–æ–≤</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="icon">‚öóÔ∏è</div>
        <h1>–°–∏—Å—Ç–µ–º–∞ —à—Ç–∞—Ç–∏–≤–æ–≤</h1>

        <!-- –°–µ–∫—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
        <div class="button-section">
            <div class="section-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</div>
            <div class="button-row">
                <button class="btn-settings" onclick="goToSettings()">
                    ‚öôÔ∏è –ü–æ–º–µ–Ω—è—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–Ω–∞—á–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–±–∏—Ä–æ–∫ –≤ —à—Ç–∞—Ç–∏–≤–µ
                </button>
            </div>
            <div class="button-row">
                <button class="btn-start" onclick="startProgram()">
                    ‚ñ∂Ô∏è –°—Ç–∞—Ä—Ç –ø—Ä–æ–≥—Ä–∞–º–º—ã
                </button>
                <button class="btn-pause" onclick="pauseProgram()">
                    ‚è∏Ô∏è –ü–∞—É–∑–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã
                </button>
                <button class="btn-resume" onclick="resumeProgram()">
                    ‚ñ∂Ô∏è –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É
                </button>
            </div>
        </div>

        <div class="divider"></div>

        <!-- –°–µ–∫—Ü–∏—è —Å–º–µ–Ω—ã —à—Ç–∞—Ç–∏–≤–æ–≤ -->
        <div class="button-section">
            <div class="section-title">–°–º–µ–Ω–∞ —à—Ç–∞—Ç–∏–≤–æ–≤</div>
            <div class="button-column">
                <button class="btn-rack" onclick="changeRackUGI()">
                    üß™ –°–º–µ–Ω–∞ —à—Ç–∞—Ç–∏–≤–∞ —Å –£–ì–ò
                </button>
                <button class="btn-rack" onclick="changeRackVPCH()">
                    üß™ –°–º–µ–Ω–∞ —à—Ç–∞—Ç–∏–≤–∞ —Å –í–ü–ß
                </button>
                <button class="btn-rack" onclick="changeRackBoth()">
                    üß™ –°–º–µ–Ω–∞ —à—Ç–∞—Ç–∏–≤–∞ —Å –£–ì–ò + –í–ü–ß
                </button>
            </div>
        </div>
    </div>

    <script>
        // API URL
        const API_URL = 'http://localhost:5000/api';

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Ä–æ–±–æ—Ç–∞
        async function updateStatus() {
            try {
                const response = await fetch(`${API_URL}/robot_status`);
                const data = await response.json();
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å—Ç–∞—Ç—É—Å–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
                console.log('–°—Ç–∞—Ç—É—Å —Ä–æ–±–æ—Ç–∞:', data);
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞:', error);
            }
        }

        function goToSettings() {
            window.location.href = 'matrices.html';
        }

        async function startProgram() {
            try {
                const response = await fetch(`${API_URL}/start_program`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'}
                });
                const data = await response.json();
                
                if (data.success) {
                    alert('‚úì ' + data.message);
                } else {
                    alert('‚úó ' + data.message);
                }
            } catch (error) {
                alert('‚úó –û—à–∏–±–∫–∞ —Å–≤—è–∑–∏ —Å —Å–µ—Ä–≤–µ—Ä–æ–º: ' + error);
            }
        }

        async function pauseProgram() {
            try {
                const response = await fetch(`${API_URL}/pause_program`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'}
                });
                const data = await response.json();
                
                if (data.success) {
                    alert('‚úì ' + data.message);
                } else {
                    alert('‚úó ' + data.message);
                }
            } catch (error) {
                alert('‚úó –û—à–∏–±–∫–∞ —Å–≤—è–∑–∏ —Å —Å–µ—Ä–≤–µ—Ä–æ–º: ' + error);
            }
        }

        async function resumeProgram() {
            try {
                const response = await fetch(`${API_URL}/resume_program`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'}
                });
                const data = await response.json();
                
                if (data.success) {
                    alert('‚úì ' + data.message);
                } else {
                    alert('‚úó ' + data.message);
                }
            } catch (error) {
                alert('‚úó –û—à–∏–±–∫–∞ —Å–≤—è–∑–∏ —Å —Å–µ—Ä–≤–µ—Ä–æ–º: ' + error);
            }
        }

        async function changeRackUGI() {
            try {
                const response = await fetch(`${API_URL}/change_rack`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({type: 'ugi'})
                });
                const data = await response.json();
                
                if (data.success) {
                    alert('‚úì ' + data.message);
                } else {
                    alert('‚úó ' + data.message);
                }
            } catch (error) {
                alert('‚úó –û—à–∏–±–∫–∞ —Å–≤—è–∑–∏ —Å —Å–µ—Ä–≤–µ—Ä–æ–º: ' + error);
            }
        }

        async function changeRackVPCH() {
            try {
                const response = await fetch(`${API_URL}/change_rack`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({type: 'vpch'})
                });
                const data = await response.json();
                
                if (data.success) {
                    alert('‚úì ' + data.message);
                } else {
                    alert('‚úó ' + data.message);
                }
            } catch (error) {
                alert('‚úó –û—à–∏–±–∫–∞ —Å–≤—è–∑–∏ —Å —Å–µ—Ä–≤–µ—Ä–æ–º: ' + error);
            }
        }

        async function changeRackBoth() {
            try {
                const response = await fetch(`${API_URL}/change_rack`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({type: 'both'})
                });
                const data = await response.json();
                
                if (data.success) {
                    alert('‚úì ' + data.message);
                } else {
                    alert('‚úó ' + data.message);
                }
            } catch (error) {
                alert('‚úó –û—à–∏–±–∫–∞ —Å–≤—è–∑–∏ —Å —Å–µ—Ä–≤–µ—Ä–æ–º: ' + error);
            }
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å –∫–∞–∂–¥—ã–µ 1 —Å–µ–∫—É–Ω–¥—É
        setInterval(updateStatus, 1000);
        updateStatus();
    </script>
</body>
</html>
